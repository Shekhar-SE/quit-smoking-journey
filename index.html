<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Quit Smoking Journey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is structured as a motivational journey, starting with immediate encouragement (Hero Section), reinforcing the 'why' with tangible benefits (Timeline/Impacts), providing the 'how' with actionable strategies, building confidence through success stories, and finally, painting a picture of a better future. This user-centric flow is designed to be supportive and empowering, turning information into a personal and interactive guide rather than a static report. -->
    <!-- Visualization & Content Choices: 
        - Health Recovery Timeline (Chart.js Line Chart): Goal is to visually motivate by showing immediate and long-term health gains. Interaction: Hover over points for details. Justification: More engaging and impactful than text.
        - Financial Savings Calculator (Vanilla JS): Goal is to make financial benefits tangible. Interaction: User inputs smoking habits, sees real-time savings. Justification: Personalizes the reward.
        - Impact of Smoking Diagram (HTML/CSS): Goal is to clearly illustrate the wide-ranging harm. Interaction: Hover on body parts to see effects. Justification: More memorable and interactive than a list.
        - Strategies & Stories (HTML/CSS Cards): Goal is to organize actionable tips and provide social proof. Interaction: Clickable/scrollable content. Justification: Clean, digestible format that prevents overwhelm.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #3f3c3a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .nav-link {
            position: relative;
            transition: color 0.3s ease-in-out, font-weight 0.3s ease-in-out;
            padding: 8px 4px;
            font-weight: 600; /* semibold */
        }
        .nav-link:hover {
            color: #16a34a; /* green-600 */
        }
        .nav-link.active {
            color: #15803d; /* green-700 */
            font-weight: 700; /* bold */
        }
        .benefit-card {
            background-color: #fff;
            border-left: 4px solid #c7a17a;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .benefit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .strategy-card {
            background-color: #F8F4EF;
        }
        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #c7a17a;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .cigarette-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            transform: rotate(-15deg);
        }
        .cigarette-part {
            height: 6px;
            background-color: #fff;
            border: 1px solid #d1d5db; /* gray-300 */
        }
        .cigarette-part.filter {
            width: 12px;
            background-color: #f97316; /* orange-500 */
            border-radius: 0 2px 2px 0;
        }
        .cigarette-part.body {
            width: 30px;
            border-radius: 2px 0 0 2px;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white sticky top-0 z-50 shadow-md">
        <nav class="container mx-auto px-6 h-20 flex justify-between items-center">
            <a href="#" aria-label="Home">
                <div class="cigarette-icon">
                    <div class="cigarette-part body"></div>
                    <div class="cigarette-part filter"></div>
                </div>
            </a>
            <div class="hidden md:flex space-x-8">
                <a href="#why" class="nav-link text-gray-500">Why Quit?</a>
                <a href="#timeline" class="nav-link text-gray-500">Timeline</a>
                <a href="#how" class="nav-link text-gray-500">How to Quit</a>
                <a href="#coach" class="nav-link text-gray-500">AI Coach</a>
                <a href="#stories" class="nav-link text-gray-500">Success Stories</a>
                <a href="#rewards" class="nav-link text-gray-500">Your Rewards</a>
            </div>
            <div class="md:hidden">
                 <button id="menu-btn" class="text-gray-700 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4 bg-white border-t border-gray-200">
            <a href="#why" class="block py-2 text-gray-600">Why Quit?</a>
            <a href="#timeline" class="block py-2 text-gray-600">Timeline</a>
            <a href="#how" class="block py-2 text-gray-600">How to Quit</a>
            <a href="#coach" class="block py-2 text-gray-600">AI Coach</a>
            <a href="#stories" class="block py-2 text-gray-600">Success Stories</a>
            <a href="#rewards" class="block py-2 text-gray-600">Your Rewards</a>
        </div>
    </header>

    <main>
        <section class="text-center py-20 px-6 bg-[#F8F4EF]">
            <h1 class="text-4xl md:text-6xl font-bold text-[#3f3c3a] mb-4">Your Journey to a Smoke-Free Life</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-8">You've made the most important decision for your health. This is Day 1. Every moment from now is a victory. You are powerful, and you are not alone.</p>
            <div class="bg-white inline-block px-8 py-4 rounded-lg shadow-lg">
                <p class="text-2xl font-bold text-[#c7a17a]">DAY</p>
                <p class="text-8xl font-bold text-[#3f3c3a]">1</p>
                <p class="text-xl font-semibold text-gray-500">of a healthier you</p>
            </div>
        </section>

        <section id="why" class="py-16 px-6 container mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Why Quit? The Sooner, The Better.</h2>
                <p class="max-w-3xl mx-auto text-gray-600">Smoking affects nearly every organ in your body. Quitting is the single best thing you can do for your health. This section explores the profound negative impacts of smoking and reinforces why your decision to quit is a life-saving one. Understanding the risks empowers you to stay committed to your goal.</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="benefit-card p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-3 text-[#3f3c3a]">Cancer Risk</h3>
                    <p class="text-gray-600">Smoking is the leading cause of preventable cancer deaths, linked to cancers of the lung, mouth, throat, bladder, kidney, and more. Quitting dramatically reduces these risks over time.</p>
                </div>
                <div class="benefit-card p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-3 text-[#3f3c3a]">Heart & Circulation</h3>
                    <p class="text-gray-600">Smoking damages your heart and blood vessels, increasing your risk of heart attack, stroke, and peripheral artery disease. Your heart will thank you for quitting, starting from day one.</p>
                </div>
                <div class="benefit-card p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-3 text-[#3f3c3a]">Lung Disease</h3>
                    <p class="text-gray-600">It's the primary cause of Chronic Obstructive Pulmonary Disease (COPD) and worsens asthma. Quitting allows your lungs to begin healing, improving breathing and reducing coughing.</p>
                </div>
                 <div class="benefit-card p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-3 text-[#3f3c3a]">Immune System</h3>
                    <p class="text-gray-600">Smoking weakens your immune system, making you more susceptible to infections. A smoke-free life means a stronger defense against illnesses.</p>
                </div>
                <div class="benefit-card p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-3 text-[#3f3c3a]">Appearance</h3>
                    <p class="text-gray-600">Smoking causes premature skin aging, stained teeth, and dulls your complexion. Quitting helps improve blood flow, allowing more oxygen and nutrients to reach your skin.</p>
                </div>
                <div class="benefit-card p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-3 text-[#3f3c3a]">Fertility & Family</h3>
                    <p class="text-gray-600">It can harm reproductive health in both men and women and poses significant risks during pregnancy. Quitting protects not only you but your loved ones too.</p>
                </div>
            </div>
        </section>

        <section id="timeline" class="py-16 px-6 bg-[#F8F4EF]">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Your Personalized Recovery Timeline</h2>
                <p class="max-w-3xl mx-auto text-gray-600">Your body's ability to heal is incredible. Enter your past smoking habits to see a personalized view of your journey ahead. This isn't just data; it's your future getting brighter, starting now.</p>
            </div>
            <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
                <div class="grid sm:grid-cols-3 gap-6 mb-6 items-end">
                    <div>
                        <label for="yearsSmoked" class="block text-sm font-medium text-gray-700">Years Smoked</label>
                        <input type="number" id="yearsSmoked" value="10" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2">
                    </div>
                    <div>
                         <label for="cigsPerDayTimeline" class="block text-sm font-medium text-gray-700">Avg. Cigarettes Per Day</label>
                        <input type="number" id="cigsPerDayTimeline" value="6" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2">
                    </div>
                    <button id="generateTimelineBtn" class="w-full bg-[#c7a17a] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#b58e67] transition duration-300">Generate My Timeline</button>
                </div>

                <div id="timeline-results" class="hidden">
                    <div class="chart-container mb-6">
                        <canvas id="recoveryChart"></canvas>
                    </div>
                    <div id="timeline-summary" class="bg-amber-50 p-6 rounded-md text-center">
                    </div>
                </div>
                 <div id="timeline-placeholder" class="text-center py-10 text-gray-500">
                    <p>Enter your details above to see your health recovery forecast.</p>
                </div>
            </div>
        </section>

        <section id="how" class="py-16 px-6 container mx-auto">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Your Toolkit: Strategies for Success</h2>
                <p class="max-w-3xl mx-auto text-gray-600">Quitting is a personal journey, and what works for one person may not work for another. This section is your personal toolkit, filled with proven strategies to help you manage cravings, handle triggers, and build a strong support system. Explore these methods and find the combination that empowers you.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="strategy-card rounded-lg p-6">
                    <h3 class="text-2xl font-bold mb-3">1. Identify Your Triggers</h3>
                    <p class="mb-4">Recognizing what makes you want to smoke is the first step. Is it your morning coffee, stress, or seeing others smoke?</p>
                    <ul class="list-disc list-inside space-y-2 text-gray-600">
                        <li><strong>Morning Routine:</strong> Change it up. Drink tea instead of coffee, or take a walk.</li>
                        <li><strong>Stress:</strong> Practice deep breathing, listen to music, or go for a run.</li>
                        <li><strong>Social Events:</strong> Politely ask friends not to smoke around you. Stick to smoke-free places initially.</li>
                    </ul>
                </div>
                <div class="strategy-card rounded-lg p-6">
                    <h3 class="text-2xl font-bold mb-3">2. Manage Cravings (The 4 D's)</h3>
                    <p class="mb-4">Cravings are intense but usually pass in 5-10 minutes. Be ready for them.</p>
                    <ul class="list-disc list-inside space-y-2 text-gray-600">
                        <li><strong>Delay:</strong> Wait it out. The urge will pass.</li>
                        <li><strong>Deep Breathe:</strong> Inhale slowly for 3 seconds, hold, and exhale for 3 seconds. Repeat.</li>
                        <li><strong>Drink Water:</strong> Sip it slowly. It helps flush out toxins and satisfies the hand-to-mouth action.</li>
                        <li><strong>Do Something Else:</strong> Distract yourself! Call a friend, do a puzzle, or walk around the block.</li>
                    </ul>
                </div>
                <div class="strategy-card rounded-lg p-6">
                    <h3 class="text-2xl font-bold mb-3">3. Build Your Support System</h3>
                     <p class="mb-4">You don't have to do this alone. Lean on people who care about you.</p>
                    <ul class="list-disc list-inside space-y-2 text-gray-600">
                        <li><strong>Tell Friends & Family:</strong> Let them know you've quit and how they can help.</li>
                        <li><strong>Join a Support Group:</strong> Connect with others who understand what you're going through.</li>
                        <li><strong>Professional Help:</strong> Talk to your doctor about Nicotine Replacement Therapy (NRT) or other medications.</li>
                    </ul>
                </div>
                 <div class="strategy-card rounded-lg p-6">
                    <h3 class="text-2xl font-bold mb-3">4. Reward Yourself</h3>
                     <p class="mb-4">Acknowledge your hard work! Celebrate milestones to stay motivated.</p>
                    <ul class="list-disc list-inside space-y-2 text-gray-600">
                        <li><strong>Daily Victory:</strong> Treat yourself to something small at the end of each smoke-free day.</li>
                        <li><strong>Weekly Milestone:</strong> Use the money you've saved to buy something you want.</li>
                        <li><strong>Monthly Goal:</strong> Plan a special dinner or a day trip.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="coach" class="py-16 px-6 bg-[#F8F4EF]">
            <div class="container mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Your AI-Powered Quit Coach</h2>
                    <p class="max-w-3xl mx-auto text-gray-600">
                        Feeling a craving or need a boost? Use these tools to get instant, personalized support powered by Gemini. Your conversations are private and not stored.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                    <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                        <h3 class="text-2xl font-bold mb-4">Daily Dose of Motivation</h3>
                        <div id="motivationOutput" class="bg-amber-50 p-4 rounded-md min-h-[120px] mb-4 text-gray-700 flex-grow flex items-center justify-center">
                            <p>Click the button below for an inspiring message to keep you going!</p>
                        </div>
                        <button id="getMotivationBtn" class="w-full bg-[#c7a17a] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#b58e67] transition duration-300 flex items-center justify-center space-x-2 disabled:opacity-50">
                            <span>Get New Motivation</span>
                            <div id="motivationLoader" class="loader hidden"></div>
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                        <h3 class="text-2xl font-bold mb-4">Instant Craving Buster</h3>
                        <label for="cravingInput" class="block text-sm font-medium text-gray-700 mb-1">What's triggering your craving?</label>
                        <input type="text" id="cravingInput" placeholder="e.g., 'My morning coffee'" class="mb-4 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2">
                         <div id="cravingAdviceOutput" class="bg-sky-50 p-4 rounded-md min-h-[120px] mb-4 text-gray-700 flex-grow flex items-center justify-center">
                            <p>Describe your trigger above and get instant, actionable advice.</p>
                        </div>
                        <button id="getCravingAdviceBtn" class="w-full bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-300 flex items-center justify-center space-x-2 disabled:opacity-50">
                            <span>Get Advice</span>
                             <div id="cravingLoader" class="loader hidden"></div>
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="stories" class="py-16 px-6">
            <div class="container mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Stories of Triumph</h2>
                    <p class="max-w-3xl mx-auto text-gray-600">Millions of people have successfully quit smoking, and their lives are better for it. Read these stories and know that you are on the same path to freedom. Their struggles were real, and their success can be your inspiration. You are capable of the same amazing transformation.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="text-gray-600 mb-4 italic">"I used to think I needed cigarettes to take a break from coding, but it just broke my concentration. Quitting was like debugging my own life. Now, my focus is sharper, and I can stay in the zone for hours. I used the money I saved to buy a new mechanical keyboard and some hardware for a robotics project. It's a much better way to use my hands."</p>
                        <p class="font-bold text-right">- Shibayan, 28</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="text-gray-600 mb-4 italic">"As a fitness enthusiast, I was lying to myself. I'd hit the gym, then have a cigarette later. My performance plateaued, and I felt like a hypocrite. The 'never quit' attitude I applied to my workouts had to apply here too. I swapped smoke breaks for stretching sessions. Now, my stamina is through the roof, and I've finally broken my personal lifting records."</p>
                        <p class="font-bold text-right">- Hrithik, 28</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="text-gray-600 mb-4 italic">"After years in startups and high-pressure IT jobs, smoking became my crutch for stress. But it was a failed system. I decided to re-architect my approach to stress. I started meditating and made a rule to walk around the block every time I felt overwhelmed. It was tough, like overcoming a failed project, but the win is so much bigger. I feel in control, not just of my health, but of my reactions to life."</p>
                        <p class="font-bold text-right">- Ankur, 34</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="rewards" class="py-16 px-6 container mx-auto">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Your New Life: Tangible Rewards</h2>
                <p class="max-w-3xl mx-auto text-gray-600">Beyond the incredible health benefits, quitting smoking brings a wealth of positive changes to your daily life. From more money in your pocket to enjoying the simple pleasures you've been missing, this section helps you visualize the rewarding life that awaits you. Let's quantify some of that success!</p>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-8 max-w-4xl mx-auto">
                <h3 class="text-2xl font-bold text-center mb-6">Calculate Your Savings</h3>
                <div class="grid md:grid-cols-2 gap-6 items-center mb-8">
                    <div>
                        <div class="mb-4">
                            <label for="cigsPerDay" class="block text-sm font-medium text-gray-700">Cigarettes per day</label>
                            <input type="number" id="cigsPerDay" value="6" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2">
                        </div>
                        <div>
                            <label for="costPerPack" class="block text-sm font-medium text-gray-700">Cost per pack (20 cigarettes)</label>
                            <input type="number" id="costPerPack" value="180" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2">
                        </div>
                    </div>
                    <div id="savingsOutput" class="text-center md:text-left space-y-4">
                        <div class="bg-green-100 p-4 rounded-lg">
                            <p class="text-lg font-semibold text-green-800">Weekly Savings</p>
                            <p id="weeklySavings" class="text-3xl font-bold text-green-900">‚Çπ0.00</p>
                        </div>
                        <div class="bg-blue-100 p-4 rounded-lg">
                            <p class="text-lg font-semibold text-blue-800">Monthly Savings</p>
                            <p id="monthlySavings" class="text-3xl font-bold text-blue-900">‚Çπ0.00</p>
                        </div>
                        <div class="bg-purple-100 p-4 rounded-lg">
                            <p class="text-lg font-semibold text-purple-800">Yearly Savings</p>
                            <p id="yearlySavings" class="text-3xl font-bold text-purple-900">‚Çπ0.00</p>
                        </div>
                    </div>
                </div>
                 <div class="mt-12 pt-8 border-t">
                    <h3 class="text-2xl font-bold text-center mb-6">More Reasons to Smile</h3>
                    <div class="grid md:grid-cols-3 gap-6 text-center">
                        <div>
                            <div class="text-4xl mb-2">üòã</div>
                            <h4 class="font-bold">Better Taste & Smell</h4>
                            <p class="text-gray-600 text-sm">Food will taste richer and your sense of smell will return to normal.</p>
                        </div>
                        <div>
                            <div class="text-4xl mb-2">üèÉ‚Äç‚ôÇÔ∏è</div>
                            <h4 class="font-bold">More Energy</h4>
                            <p class="text-gray-600 text-sm">Improved circulation and oxygen levels mean more stamina for daily activities.</p>
                        </div>
                        <div>
                             <div class="text-4xl mb-2">üòä</div>
                            <h4 class="font-bold">Reduced Stress</h4>
                            <p class="text-gray-600 text-sm">After withdrawal, ex-smokers report lower levels of stress and anxiety.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#3f3c3a] text-white py-12 px-6">
        <div class="container mx-auto text-center">
            <h2 class="text-3xl font-bold mb-4">You Have the Strength to Succeed</h2>
            <p class="max-w-2xl mx-auto mb-6">Your smoke-free journey has begun. There will be challenges, but the rewards are immeasurable. Remember your 'why', use your strategies, and celebrate every victory. You are reclaiming your health, your future, and your freedom.</p>
            <p class="text-sm text-gray-400">&copy; 2025 New Breath. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let recoveryChartInstance = null;
            const recoveryData = {
                labels: ['20 Mins', '12 Hrs', '24 Hrs', '48 Hrs', '1 Month', '9 Months', '1 Year', '5 Years', '10 Years', '15 Years'],
                tooltips: [
                    'Your heart rate and blood pressure drop.',
                    'Carbon monoxide level in your blood drops to normal.',
                    'Your risk of heart attack begins to decrease significantly.',
                    'Nerve endings start regrowing; ability to smell and taste is enhanced.',
                    'Lung function improves. Coughing and shortness of breath decrease.',
                    'Cilia (tiny hair-like structures) regain normal function in the lungs, increasing their ability to handle mucus, clean the lungs, and reduce infection.',
                    'Excess risk of coronary heart disease is half that of a continuing smoker.',
                    'Stroke risk is reduced to that of a nonsmoker 5 to 15 years after quitting.',
                    'Lung cancer death rate is about half that of a person who is still smoking.',
                    'Risk of coronary heart disease is that of a nonsmoker‚Äôs.'
                ],
                data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
            };
            
            const generateTimelineBtn = document.getElementById('generateTimelineBtn');
            const yearsSmokedInput = document.getElementById('yearsSmoked');
            const cigsPerDayTimelineInput = document.getElementById('cigsPerDayTimeline');
            const timelineResults = document.getElementById('timeline-results');
            const timelinePlaceholder = document.getElementById('timeline-placeholder');
            const timelineSummary = document.getElementById('timeline-summary');

            generateTimelineBtn.addEventListener('click', () => {
                const yearsSmoked = parseFloat(yearsSmokedInput.value);
                const cigsPerDay = parseFloat(cigsPerDayTimelineInput.value);

                if (isNaN(yearsSmoked) || isNaN(cigsPerDay) || yearsSmoked <= 0 || cigsPerDay <= 0) {
                    alert("Please enter valid numbers for years and cigarettes per day.");
                    return;
                }

                timelinePlaceholder.classList.add('hidden');
                timelineResults.classList.remove('hidden');

                const totalCigs = Math.round(yearsSmoked * cigsPerDay * 365.25);
                timelineSummary.innerHTML = `
                    <p class="text-lg text-gray-700">
                        Based on your history, you smoked approximately <strong class="text-[#c7a17a] text-xl">${totalCigs.toLocaleString('en-IN')}</strong> cigarettes.
                        By quitting today, you've chosen a new path. The chart above shows the standard, powerful milestones of your body's recovery.
                        Every single one of these milestones represents you reversing the past and building a healthier future.
                    </p>
                `;

                if (recoveryChartInstance) {
                    recoveryChartInstance.destroy();
                }
                
                const ctx = document.getElementById('recoveryChart').getContext('2d');
                recoveryChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: recoveryData.labels,
                        datasets: [{
                            label: 'Health Milestones',
                            data: recoveryData.data,
                            backgroundColor: 'rgba(199, 161, 122, 0.2)',
                            borderColor: '#c7a17a',
                            tension: 0.1,
                            fill: true,
                            pointBackgroundColor: '#c7a17a',
                            pointHoverRadius: 7,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { display: false, beginAtZero: true, max: 11 },
                            x: { grid: { display: false } }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) { return recoveryData.tooltips[context.dataIndex]; }
                                },
                                displayColors: false,
                                backgroundColor: '#3f3c3a',
                                titleFont: { size: 0 },
                                bodyFont: { size: 14 },
                                padding: 12,
                            }
                        }
                    }
                });
            });


            const cigsPerDayInput = document.getElementById('cigsPerDay');
            const costPerPackInput = document.getElementById('costPerPack');
            const weeklySavingsEl = document.getElementById('weeklySavings');
            const monthlySavingsEl = document.getElementById('monthlySavings');
            const yearlySavingsEl = document.getElementById('yearlySavings');

            function calculateSavings() {
                const cigsPerDay = parseFloat(cigsPerDayInput.value) || 0;
                const costPerPack = parseFloat(costPerPackInput.value) || 0;
                const costPerCig = costPerPack / 20;

                const dailyCost = cigsPerDay * costPerCig;
                const weeklySavings = dailyCost * 7;
                const monthlySavings = dailyCost * 30.44; 
                const yearlySavings = dailyCost * 365.25;

                weeklySavingsEl.textContent = `‚Çπ${weeklySavings.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                monthlySavingsEl.textContent = `‚Çπ${monthlySavings.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                yearlySavingsEl.textContent = `‚Çπ${yearlySavings.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            }

            cigsPerDayInput.addEventListener('input', calculateSavings);
            costPerPackInput.addEventListener('input', calculateSavings);
            calculateSavings();

            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const mainNavLinks = document.querySelectorAll('header .hidden.md\\:flex .nav-link');
            const mobileNavLinks = document.querySelectorAll('#mobile-menu a');
            
            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            mobileNavLinks.forEach(anchor => {
                anchor.addEventListener('click', function () {
                    mobileMenu.classList.add('hidden');
                });
            });

            const sections = document.querySelectorAll('main section');
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });

                mainNavLinks.forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active');
                    }
                });
            });


            const getMotivationBtn = document.getElementById('getMotivationBtn');
            const motivationOutput = document.getElementById('motivationOutput');
            const motivationLoader = document.getElementById('motivationLoader');
            const getCravingAdviceBtn = document.getElementById('getCravingAdviceBtn');
            const cravingInput = document.getElementById('cravingInput');
            const cravingAdviceOutput = document.getElementById('cravingAdviceOutput');
            const cravingLoader = document.getElementById('cravingLoader');
            
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            async function callGemini(prompt, maxRetries = 3) {
                 const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                 };

                let delay = 1000;
                for (let i = 0; i < maxRetries; i++) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            if (response.status >= 500) {
                                throw new Error(`HTTP error! status: ${response.status}`);
                            }
                            const errorResult = await response.json();
                            return { error: `API Error: ${errorResult.error?.message || 'Unknown error'}` };
                        }

                        const result = await response.json();
                        const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                        
                        if (text) {
                            return { text };
                        } else {
                            throw new Error("Invalid response structure from API");
                        }
                    } catch (error) {
                        if (i < maxRetries - 1) {
                            await new Promise(res => setTimeout(res, delay));
                            delay *= 2; 
                        } else {
                            return { error: "Failed to get a response from the AI coach after several attempts. Please try again later." };
                        }
                    }
                }
            }

            getMotivationBtn.addEventListener('click', async () => {
                motivationLoader.classList.remove('hidden');
                getMotivationBtn.disabled = true;
                motivationOutput.innerHTML = `<p>Getting your motivation...</p>`;
                
                const prompt = "Generate a short (2-3 sentences), powerful, and encouraging message for someone quitting smoking. Focus on strength, freedom, and the positive future they are building. Do not use generic phrases like 'you can do it'.";
                const result = await callGemini(prompt);

                if (result.error) {
                    motivationOutput.innerHTML = `<p class="text-red-500">${result.error}</p>`;
                } else {
                    motivationOutput.innerHTML = `<p>${result.text.replace(/\n/g, '<br>')}</p>`;
                }

                motivationLoader.classList.add('hidden');
                getMotivationBtn.disabled = false;
            });

            getCravingAdviceBtn.addEventListener('click', async () => {
                const trigger = cravingInput.value.trim();
                if (!trigger) {
                    cravingAdviceOutput.innerHTML = `<p class="text-red-500">Please describe your trigger first.</p>`;
                    return;
                }

                cravingLoader.classList.remove('hidden');
                getCravingAdviceBtn.disabled = true;
                cravingAdviceOutput.innerHTML = `<p>Thinking of a plan for you...</p>`;

                const prompt = `I am trying to quit smoking and I am feeling a strong craving because of: "${trigger}". Provide me with 3 immediate, simple, and actionable steps I can take right now to overcome this specific craving. Format the response as a simple list. Be direct and supportive.`;
                const result = await callGemini(prompt);
                
                if (result.error) {
                    cravingAdviceOutput.innerHTML = `<p class="text-red-500">${result.error}</p>`;
                } else {
                    cravingAdviceOutput.innerHTML = `<p>${result.text.replace(/\n/g, '<br>')}</p>`;
                }

                cravingLoader.classList.add('hidden');
                getCravingAdviceBtn.disabled = false;
            });
        });
    </script>
</body>
</html>

